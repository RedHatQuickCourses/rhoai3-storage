= RHOAI 3 Connectivity Taxonomy
:role: Reference Guide
:audience: Platform Engineers
:description: The official dictionary of storage terms, protocols, and required configurations for RHOAI 3.

[.lead]
*To speak the language of the platform, you must master the vocabulary.*

RHOAI 3 introduces specific terminology and deprecates older formats. Use this guide to ensure your configurations validate correctly against the new API standards.

== Core Primitives

=== Data Connection (The Gateway)
A Kubernetes resource containing configuration parameters (key-value pairs) to access external data.
* **Storage Location:** Stored securely as a Kubernetes Secret.
* **Injection:** Injected into Pods as Environment Variables.
* **Scope:** Namespace-isolated (cannot be shared across projects).

=== Connection Types (The Template)
An administrator-defined template that dictates what fields a user must provide.
* **Example:** An admin creates a "Corporate S3" type requiring `Bucket`, `Endpoint`, and `Region`.
* **Value:** Ensures standardization across the enterprise.

== Protocol Specifications (RHOAI 3 Updates)

[WARNING]
.Deprecation Alert
====
The annotation `opendatahub.io/connection-type-ref` is **deprecated**.
You must now use `opendatahub.io/connection-type-protocol` for all new connection secrets.
====

=== 1. S3-Compatible Object Storage (`s3`)
* **Use Case:** The default for Data Lakes, Pipeline Artifacts, and standard Model Serving.
* **Required Fields:** Access Key, Secret Key, Endpoint, Bucket.
* **Note:** For self-signed certificates (MinIO), you must inject the Bundle CA.

=== 2. OCI Model Registry (`oci`)
* **Use Case:** "Modelcars"â€”pulling models from container registries.
* **Performance:** optimal for large-scale inference deployments.

=== 3. URI (`uri`)
* **Use Case:** HTTP/HTTPS based model repositories.
* **Limitation:** Generally read-only; less secure than S3/OCI connections.

== The Database Shift (New in RHOAI 3)
RHOAI 3 moves away from file-based metadata for critical components.

* **Model Registry:** Now requires **MySQL** (5.x or 8.x) external database.
* **Llama Stack (RAG):**
    ** **Vector Store:** Requires **Milvus** or **PostgreSQL (pgvector)**.
    ** **Metadata:** SQLite is removed for production; PostgreSQL is mandated.